{% extends "base.html" %}

{% block title %}ç ´å£ç‹éŠæˆ²{% endblock %}

{% block head %}
    {# 1. å¼•å…¥ Brython å‡½å¼åº« #}
    <script src="https://cdn.jsdelivr.net/npm/brython@3.11.2/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.11.2/brython_stdlib.min.js"></script>
{% endblock %}

{% block content %}
    
    <h2 style="text-align: center;">ğŸ¯ æ‹–æ›³å½ˆå¼“ â†’ å°„é£›å½ˆ â†’ æ‰“å€’å°è±¬ï¼</h2>

    <div style="text-align: center; margin-bottom: 15px;">
        <p style="font-size: 1.1em; font-weight: bold;">
            åˆ†æ•¸ï¼š<span id="score_display">0</span> |  
            å‰©é¤˜å°„æ“Šæ¬¡æ•¸ï¼š<span id="shots_remaining">10</span>
        </p>
    </div>

    <div style="display: flex; justify-content: center;">
        {# 2. éŠæˆ² Canvas å…ƒç´  #}
        <canvas id="gameCanvas" width="800" height="400"
                style="border:1px solid black; background-color: #f0fff0;"></canvas>
    </div>

    {# 3. è¼‰å…¥å¤–éƒ¨çš„ game.py æª”æ¡ˆ #}
    <script type="text/python" src="{{ url_for('static', filename='game.py') }}"></script>
    
    {# 4. å•Ÿå‹• Brython ç’°å¢ƒ #}
    <script type="text/javascript">
        // ä½¿ç”¨ setTimeout/IIFE æ˜¯æœ€å¯é çš„å•Ÿå‹•æ–¹å¼ï¼Œç¢ºä¿ brython() å‡½å¼å·²å®Œå…¨è¼‰å…¥ã€‚
        setTimeout(function() {
            if (typeof brython === 'function') {
                brython(1); 
            } else {
                console.error("Brython failed to start. Check network.");
            }
        }, 100); 
    </script>
    
{% endblock %}